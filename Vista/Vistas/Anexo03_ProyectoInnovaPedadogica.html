<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>ANEXO 03 - Evaluación Proyecto de Innovación Pedagógica</title>

    <!-- Estilos generales del formulario -->
    <link rel="stylesheet" href="../Recurso/Css/evaluar_form.css">
</head>
<body>

<main class="anexo-container">

    <!-- ENCABEZADO -->
    <header class="anexo-header">
        <h1>ANEXO 03</h1>
        <h2>Evaluación del Proyecto de Innovación Pedagógica</h2>
        <p class="anexo-descripcion">
            Complete los criterios marcando <strong>Sí</strong> o <strong>No</strong>. 
            Al finalizar, haga clic en <strong>Guardar evaluación</strong> para enviar la calificación al sistema.
        </p>
        <hr>
    </header>

    <form id="formAnexo03" class="anexo-form">

        <!-- ======================================================= -->
        <!-- I. DATOS GENERALES -->
        <!-- ======================================================= -->
        <section class="anexo-bloque">
            <h3>I. Datos generales</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c1">1. Describe la línea de investigación</label>
                    <select id="c1" name="c1">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c2">2. Describe a los beneficiarios</label>
                    <select id="c2" name="c2">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c3">3. Menciona el costo del proyecto</label>
                    <select id="c3" name="c3">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c4">4. Explica la fuente de financiamiento</label>
                    <select id="c4" name="c4">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c5">5. Indica el lugar de ejecución</label>
                    <select id="c5" name="c5">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ======================================================= -->
        <!-- II. TÍTULO -->
        <!-- ======================================================= -->
        <section class="anexo-bloque">
            <h3>II. Título</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c6">6. Refleja el listado de situaciones problemáticas</label>
                    <select id="c6" name="c6">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c7">7. Enumera los problemas más relevantes</label>
                    <select id="c7" name="c7">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ======================================================= -->
        <!-- III. PROBLEMA -->
        <!-- ======================================================= -->
        <section class="anexo-bloque">
            <h3>III. Problema</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c8">8. Reagrupa adecuadamente los problemas identificados</label>
                    <select id="c8" name="c8">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c9">9. Prioriza los problemas de forma coherente</label>
                    <select id="c9" name="c9">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c10">10. Presenta un árbol de problemas adecuado</label>
                    <select id="c10" name="c10">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c11">11. Presenta un árbol de potencialidades</label>
                    <select id="c11" name="c11">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c12">12. Define de forma clara causas y efectos</label>
                    <select id="c12" name="c12">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ======================================================= -->
        <!-- IV. OBJETIVOS -->
        <!-- ======================================================= -->
        <section class="anexo-bloque">
            <h3>IV. Objetivos</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c13">13. Explica claramente el objetivo central del proyecto</label>
                    <select id="c13" name="c13">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c14">14. Presenta los resultados esperados del proyecto</label>
                    <select id="c14" name="c14">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ======================================================= -->
        <!-- V. FUNDAMENTACIÓN -->
        <!-- ======================================================= -->
        <section class="anexo-bloque">
            <h3>V. Fundamentación</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c15">15. Presenta una fundamentación teórica adecuada</label>
                    <select id="c15" name="c15">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c16">16. Explica el tipo de investigación</label>
                    <select id="c16" name="c16">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c17">17. Identifica beneficiarios directos e indirectos</label>
                    <select id="c17" name="c17">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ======================================================= -->
        <!-- VI. METODOLOGÍA -->
        <!-- ======================================================= -->
        <section class="anexo-bloque">
            <h3>VI. Metodología</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c18">18. Señala el lugar y periodo de investigación</label>
                    <select id="c18" name="c18">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c19">19. Define claramente la población beneficiaria</label>
                    <select id="c19" name="c19">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c20">20. Identifica el presupuesto del proyecto</label>
                    <select id="c20" name="c20">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c21">21. Establece metas claras del proyecto</label>
                    <select id="c21" name="c21">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c22">22. Presenta un cronograma de actividades</label>
                    <select id="c22" name="c22">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c23">23. Identifica a los responsables del proyecto</label>
                    <select id="c23" name="c23">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ======================================================= -->
        <!-- VII. REFERENCIAS -->
        <!-- ======================================================= -->
        <section class="anexo-bloque">
            <h3>VII. Referencias</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c24">24. Las referencias bibliográficas siguen el estilo APA</label>
                    <select id="c24" name="c24">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ======================================================= -->
        <!-- VIII. ACTIVIDADES -->
        <!-- ======================================================= -->
        <section class="anexo-bloque">
            <h3>VIII. Actividades</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c25">25. Las actividades propuestas son coherentes y pertinentes</label>
                    <select id="c25" name="c25">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ======================================================= -->
        <!-- IX. ANEXOS -->
        <!-- ======================================================= -->
        <section class="anexo-bloque">
            <h3>IX. Anexos</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c26">26. Los anexos están completos y correctamente presentados</label>
                    <select id="c26" name="c26">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ======================================================= -->
        <!-- X. PUNTAJE ADICIONAL -->
        <!-- ======================================================= -->
        <section class="anexo-bloque">
            <h3>X. Puntaje adicional</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c27">27. Cumple con la estructura general del proyecto</label>
                    <select id="c27" name="c27">
                        <option value="">Seleccione</option>
                        <option value="1">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <hr>

        <!-- BOTÓN DE ENVÍO -->
        <div class="anexo-acciones">
            <button id="btnEnviar" type="submit" class="btn-guardar">
                Guardar evaluación
            </button>
        </div>

    </form>
</main>

<!-- ======================================================= -->
<!-- SCRIPT DEL SISTEMA DE EVALUACIÓN -->
<!-- ======================================================= -->
<script>
document.getElementById("formAnexo03").addEventListener("submit", function(e){
    e.preventDefault();

    const btn = document.getElementById("btnEnviar");
    btn.disabled = true;
    btn.textContent = "Enviando...";

    const form = new FormData(e.target);
    let suma = 0;

    const TOTAL = 27; // total de criterios del ANEXO 03

    for (let i = 1; i <= TOTAL; i++) {
        const val = Number(form.get("c" + i));
        if (!isNaN(val)) suma += val;
    }

    const nota = Math.round((suma / TOTAL) * 20);

    const observaciones =
        nota >= 11
            ? "Proyecto aprobado según los criterios establecidos."
            : "Proyecto desaprobado. Se recomienda revisar los criterios no cumplidos.";

    parent.postMessage(
        {
            tipo: "evaluacion",
            nota,
            observaciones,
            puntaje_total: suma,
            detalles: {
                tipo: "perfil",
                total_criterios: TOTAL,
                puntaje: suma,
                calculado_en: new Date().toISOString()
            }
        },
        "*"
    );

    alert("Evaluación enviada correctamente.");
    btn.textContent = "Enviado ✔";
});
</script>

</body>
</html>
