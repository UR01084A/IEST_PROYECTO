<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>ANEXO 02 - Evaluaci√≥n Proyecto de Innovaci√≥n Tecnol√≥gica</title>

    <!-- Estilos generales del formulario -->
    <link rel="stylesheet" href="../Recurso/Css/evaluar_form.css">
</head>
<body>

<main class="anexo-container">

    <!-- ENCABEZADO -->
    <header class="anexo-header">
        <h1>ANEXO 02</h1>
        <h2>Evaluaci√≥n del Proyecto de Innovaci√≥n Tecnol√≥gica</h2>
        <p class="anexo-descripcion">
            Complete los siguientes criterios marcando <strong>S√≠</strong> o <strong>No</strong>. 
            Al finalizar, presione <strong>Guardar evaluaci√≥n</strong> para enviar el resultado al sistema.
        </p>
        <hr>
    </header>

    <form id="formAnexo02" class="anexo-form">

        <!-- ===================================== -->
        <!-- I. DATOS GENERALES -->
        <!-- ===================================== -->
        <section class="anexo-bloque">
            <h3>I. Datos generales</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c1">1. Describe la l√≠nea de investigaci√≥n</label>
                    <select id="c1" name="c1">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c2">2. Describe los beneficiarios</label>
                    <select id="c2" name="c2">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c3">3. Menciona el costo del proyecto</label>
                    <select id="c3" name="c3">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c4">4. Explica la fuente de financiamiento</label>
                    <select id="c4" name="c4">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c5">5. Indica el lugar de ejecuci√≥n</label>
                    <select id="c5" name="c5">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ===================================== -->
        <!-- II. T√çTULO -->
        <!-- ===================================== -->
        <section class="anexo-bloque">
            <h3>II. T√≠tulo</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c6">6. Refleja el contenido del problema</label>
                    <select id="c6" name="c6">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c7">7. Es concordante con las variables de estudio</label>
                    <select id="c7" name="c7">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c8">8. Describe el problema desde el punto de vista cient√≠fico</label>
                    <select id="c8" name="c8">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c9">9. Considera adecuadamente variables y dimensiones</label>
                    <select id="c9" name="c9">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ===================================== -->
        <!-- III. IDENTIFICACI√ìN DEL PROBLEMA -->
        <!-- ===================================== -->
        <section class="anexo-bloque">
            <h3>III. Identificaci√≥n del problema</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c10">10. El objetivo general se relaciona con el problema</label>
                    <select id="c10" name="c10">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c11">11. Los objetivos espec√≠ficos son claros y pertinentes</label>
                    <select id="c11" name="c11">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c12">12. La justificaci√≥n social est√° correctamente desarrollada</label>
                    <select id="c12" name="c12">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c13">13. Establece claramente el alcance del proyecto</label>
                    <select id="c13" name="c13">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c14">14. Presenta antecedentes pertinentes y actualizados</label>
                    <select id="c14" name="c14">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ===================================== -->
        <!-- IV. MARCO REFERENCIAL -->
        <!-- ===================================== -->
        <section class="anexo-bloque">
            <h3>IV. Marco referencial</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c15">15. Los antecedentes resumen adecuadamente el problema</label>
                    <select id="c15" name="c15">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c16">16. Presenta teor√≠as relevantes y actualizadas</label>
                    <select id="c16" name="c16">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c17">17. Hace un uso adecuado de variables y dimensiones</label>
                    <select id="c17" name="c17">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ===================================== -->
        <!-- V. METODOLOG√çA -->
        <!-- ===================================== -->
        <section class="anexo-bloque">
            <h3>V. Metodolog√≠a</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c18">18. El tipo de investigaci√≥n es adecuado al problema</label>
                    <select id="c18" name="c18">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c19">19. Explica claramente el dise√±o de investigaci√≥n</label>
                    <select id="c19" name="c19">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c20">20. Define de forma precisa la innovaci√≥n tecnol√≥gica propuesta</label>
                    <select id="c20" name="c20">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c21">21. Identifica correctamente el segmento de clientes</label>
                    <select id="c21" name="c21">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ===================================== -->
        <!-- VI. MERCADO -->
        <!-- ===================================== -->
        <section class="anexo-bloque">
            <h3>VI. Mercado</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c22">22. Presenta la demanda potencial del producto/servicio</label>
                    <select id="c22" name="c22">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c23">23. Describe los canales de distribuci√≥n previstos</label>
                    <select id="c23" name="c23">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c24">24. Contextualiza adecuadamente el proyecto en el mercado</label>
                    <select id="c24" name="c24">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ===================================== -->
        <!-- VII. ADMINISTRACI√ìN -->
        <!-- ===================================== -->
        <section class="anexo-bloque">
            <h3>VII. Administraci√≥n</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c25">25. Especifica lugar y periodo de ejecuci√≥n</label>
                    <select id="c25" name="c25">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c26">26. Presenta costos directos e indirectos</label>
                    <select id="c26" name="c26">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c27">27. Incluye indicadores evaluativos del proyecto</label>
                    <select id="c27" name="c27">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c28">28. Presenta un cronograma de actividades claro</label>
                    <select id="c28" name="c28">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <!-- ===================================== -->
        <!-- VIII. REFERENCIAS -->
        <!-- ===================================== -->
        <section class="anexo-bloque">
            <h3>VIII. Referencias</h3>
            <div class="preguntas">

                <div class="campo">
                    <label for="c29">29. Las referencias bibliogr√°ficas siguen el estilo APA</label>
                    <select id="c29" name="c29">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

            </div>
        </section>

        <hr>

        <!-- BOT√ìN DE ENV√çO -->
        <div class="anexo-acciones">
            <button id="btnEnviar" type="submit" class="btn-guardar">
                Guardar evaluaci√≥n
            </button>
        </div>

    </form>
</main>

<!-- ======================================================= -->
<!-- SCRIPT COMPLETO DEL SISTEMA DE EVALUACI√ìN -->
<!-- ======================================================= -->
<script>
document.getElementById("formAnexo02").addEventListener("submit", function(e){
    e.preventDefault();

    const btn = document.getElementById("btnEnviar");
    btn.disabled = true;
    btn.textContent = "Enviando...";

    const form = new FormData(e.target);
    let suma = 0;

    // Total de criterios del ANEXO 02
    const TOTAL = 29;

    for (let i = 1; i <= TOTAL; i++) {
        const val = Number(form.get("c" + i));
        if (!isNaN(val)) suma += val;
    }

    // ‚úÖ Ahora la nota ES el puntaje original (0‚Äì29)
    const nota = suma;

    // RANGOS para ANEXO 02 (Innovaci√≥n Tecnol√≥gica)
    // 20‚Äì29: Bueno  ‚Üí Aprobado
    // 11‚Äì19: Regular ‚Üí Desaprobado
    // 0‚Äì10 : Malo    ‚Üí Desaprobado
    let nivel, condicion;

    if (nota >= 20) {
        nivel = "Bueno";
        condicion = "Aprobado";
    } else if (nota >= 11) {
        nivel = "Regular";
        condicion = "Desaprobado";
    } else {
        nivel = "Malo";
        condicion = "Desaprobado";
    }

    const observaciones =
        condicion === "Aprobado"
            ? "Proyecto aprobado seg√∫n los criterios establecidos."
            : "Proyecto desaprobado. Se recomienda revisar los criterios no cumplidos.";

    // Enviamos la info al dashboard del Jefe (iframe padre)
    parent.postMessage(
        {
            tipo: "evaluacion",
            nota,             // üëà puntaje ORIGINAL (0‚Äì29)
            nivel,
            condicion,
            observaciones,

            // Campos extra informativos (por si luego los usas/logueas)
            puntaje_total: suma,
            total_criterios: TOTAL,
            detalles: {
                tipo: "perfil",
                total_criterios: TOTAL,
                puntaje: suma,
                calculado_en: new Date().toISOString()
            }
        },
        "*"
    );

    alert(
        "PUNTAJE OBTENIDO: " + nota +
        "\nNIVEL: " + nivel +
        "\nCONDICI√ìN: " + condicion
    );

    btn.textContent = "Enviado ‚úî";
});
</script>

</html>
