<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>ANEXO 01 - Evaluaci√≥n Proyecto de Investigaci√≥n Aplicada</title>

    <!-- Estilos generales del formulario -->
    <link rel="stylesheet" href="../Recurso/Css/evaluar_form.css">
</head>
<body>

<main class="anexo-container">

    <!-- ENCABEZADO -->
    <header class="anexo-header">
        <h1>ANEXO 01</h1>
        <h2>Evaluaci√≥n del Proyecto de Investigaci√≥n Aplicada</h2>
        <p class="anexo-descripcion">
            Complete los siguientes criterios marcando <strong>S√≠</strong> o <strong>No</strong>. 
            Al finalizar, presione <strong>Guardar evaluaci√≥n</strong> para enviar el resultado al sistema.
        </p>
        <hr>
    </header>

    <form id="formAnexo01" class="anexo-form">

        <!-- ================================================== -->
        <!-- I. DATOS GENERALES -->
        <!-- ================================================== -->
        <section class="anexo-bloque">
            <h3>I. Datos generales</h3>
            <div class="preguntas">
                <div class="campo">
                    <label for="c1">1. Describe la l√≠nea de investigaci√≥n</label>
                    <select id="c1" name="c1">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c2">2. Describe beneficiarios directos e indirectos</label>
                    <select id="c2" name="c2">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c3">3. Menciona el costo del proyecto</label>
                    <select id="c3" name="c3">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c4">4. Explica la fuente de financiamiento</label>
                    <select id="c4" name="c4">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c5">5. Menciona el lugar de ejecuci√≥n</label>
                    <select id="c5" name="c5">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- ================================================== -->
        <!-- II. T√çTULO -->
        <!-- ================================================== -->
        <section class="anexo-bloque">
            <h3>II. T√≠tulo</h3>
            <div class="preguntas">
                <div class="campo">
                    <label for="c6">6. Refleja el contenido del problema</label>
                    <select id="c6" name="c6">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c7">7. Es concordante con las variables de estudio</label>
                    <select id="c7" name="c7">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c8">8. Describe el problema desde el punto de vista cient√≠fico</label>
                    <select id="c8" name="c8">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c9">9. La formulaci√≥n considera variables y dimensiones</label>
                    <select id="c9" name="c9">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- ================================================== -->
        <!-- III. IDENTIFICACI√ìN DEL PROBLEMA -->
        <!-- ================================================== -->
        <section class="anexo-bloque">
            <h3>III. Identificaci√≥n del problema</h3>
            <div class="preguntas">
                <div class="campo">
                    <label for="c10">10. El objetivo general se relaciona con el problema</label>
                    <select id="c10" name="c10">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c11">11. Los objetivos espec√≠ficos se relacionan con las variables</label>
                    <select id="c11" name="c11">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c12">12. La justificaci√≥n social expresa el beneficio</label>
                    <select id="c12" name="c12">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c13">13. Establece adecuadamente el alcance del problema</label>
                    <select id="c13" name="c13">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c14">14. Presenta antecedentes pertinentes</label>
                    <select id="c14" name="c14">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- ================================================== -->
        <!-- IV. MARCO TE√ìRICO -->
        <!-- ================================================== -->
        <section class="anexo-bloque">
            <h3>IV. Marco te√≥rico</h3>
            <div class="preguntas">
                <div class="campo">
                    <label for="c15">15. Los antecedentes resumen adecuadamente el problema</label>
                    <select id="c15" name="c15">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c16">16. Presenta la teor√≠a de forma clara y l√≥gica</label>
                    <select id="c16" name="c16">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- ================================================== -->
        <!-- V. HIP√ìTESIS -->
        <!-- ================================================== -->
        <section class="anexo-bloque">
            <h3>V. Hip√≥tesis</h3>
            <div class="preguntas">
                <div class="campo">
                    <label for="c17">17. Usa conceptos adecuados de variables y dimensiones</label>
                    <select id="c17" name="c17">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c18">18. La hip√≥tesis general tiene relaci√≥n con el problema</label>
                    <select id="c18" name="c18">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c19">19. Las hip√≥tesis espec√≠ficas corresponden a las variables</label>
                    <select id="c19" name="c19">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c20">20. Las variables est√°n conceptualizadas</label>
                    <select id="c20" name="c20">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c21">21. La operacionalizaci√≥n es correcta</label>
                    <select id="c21" name="c21">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c22">22. Existe relaci√≥n entre dimensiones e indicadores</label>
                    <select id="c22" name="c22">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c23">23. Identifica adecuadamente el m√©todo general</label>
                    <select id="c23" name="c23">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- ================================================== -->
        <!-- VI. METODOLOG√çA -->
        <!-- ================================================== -->
        <section class="anexo-bloque">
            <h3>VI. Metodolog√≠a</h3>
            <div class="preguntas">
                <div class="campo">
                    <label for="c24">24. El tipo de investigaci√≥n est√° bien definido</label>
                    <select id="c24" name="c24">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c25">25. El nivel de investigaci√≥n es correcto</label>
                    <select id="c25" name="c25">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c26">26. El dise√±o es adecuado al nivel de investigaci√≥n</label>
                    <select id="c26" name="c26">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c27">27. Universo y poblaci√≥n est√°n bien descritos</label>
                    <select id="c27" name="c27">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c28">28. La muestra est√° correctamente definida</label>
                    <select id="c28" name="c28">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c29">29. T√©cnicas e instrumentos est√°n bien identificados</label>
                    <select id="c29" name="c29">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c30">30. M√©todos espec√≠ficos de evaluaci√≥n son adecuados</label>
                    <select id="c30" name="c30">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="campo">
                    <label for="c31">31. M√©todos estad√≠sticos est√°n bien seleccionados</label>
                    <select id="c31" name="c31">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- ================================================== -->
        <!-- VII. CRONOGRAMA -->
        <!-- ================================================== -->
        <section class="anexo-bloque">
            <h3>VII. Cronograma</h3>
            <div class="preguntas">
                <div class="campo">
                    <label for="c32">32. El cronograma es coherente con las actividades</label>
                    <select id="c32" name="c32">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- ================================================== -->
        <!-- VIII. PRESUPUESTO -->
        <!-- ================================================== -->
        <section class="anexo-bloque">
            <h3>VIII. Presupuesto</h3>
            <div class="preguntas">
                <div class="campo">
                    <label for="c33">33. Se establece un presupuesto claro y suficiente</label>
                    <select id="c33" name="c33">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- ================================================== -->
        <!-- IX. REFERENCIAS -->
        <!-- ================================================== -->
        <section class="anexo-bloque">
            <h3>IX. Referencias</h3>
            <div class="preguntas">
                <div class="campo">
                    <label for="c34">34. La redacci√≥n de referencias sigue el estilo APA</label>
                    <select id="c34" name="c34">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- ================================================== -->
        <!-- X. ANEXOS -->
        <!-- ================================================== -->
        <section class="anexo-bloque">
            <h3>X. Anexos</h3>
            <div class="preguntas">
                <div class="campo">
                    <label for="c35">35. Presenta anexos completos y ordenados</label>
                    <select id="c35" name="c35">
                        <option value="">Seleccione</option>
                        <option value="1">S√≠</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </section>

        <hr>

        <!-- BOT√ìN DE ENV√çO -->
        <div class="anexo-acciones">
            <button id="btnEnviar" type="submit" class="btn-guardar">
                Guardar evaluaci√≥n
            </button>
        </div>

    </form>
</main>

<!-- ======================================================= -->
<!-- SCRIPT COMPLETO DEL SISTEMA DE EVALUACI√ìN -->
<!-- ======================================================= -->
<script>
document.getElementById("formAnexo01").addEventListener("submit", function (e) {
    e.preventDefault();

    const btn = document.getElementById("btnEnviar");
    btn.disabled = true;
    btn.textContent = "Enviando...";

    const form = new FormData(e.target);
    let suma = 0;

    // Cantidad total de criterios del ANEXO 01
    const TOTAL = 35;

    for (let i = 1; i <= TOTAL; i++) {
        const val = Number(form.get("c" + i));
        if (!isNaN(val)) suma += val;
    }

    // ‚úÖ La nota ahora es el puntaje ORIGINAL (0‚Äì35)
    const nota = suma;

    // RANGOS ANEXO 01 ‚Äì Investigaci√≥n Aplicada
    // 25‚Äì35 ‚Üí Bueno  ‚Üí Aprobado
    // 16‚Äì24 ‚Üí Regular ‚Üí Desaprobado
    // 0‚Äì15  ‚Üí Malo    ‚Üí Desaprobado
    let nivel, condicion;

    if (nota >= 25) {
        nivel = "Bueno";
        condicion = "Aprobado";
    } else if (nota >= 16) {
        nivel = "Regular";
        condicion = "Desaprobado";
    } else {
        nivel = "Malo";
        condicion = "Desaprobado";
    }

    const observaciones =
        condicion === "Aprobado"
            ? "Proyecto aprobado seg√∫n los criterios establecidos."
            : "Proyecto desaprobado. Se recomienda revisar los criterios no cumplidos.";

    // Enviamos los datos al dashboard del Jefe (iframe padre)
    parent.postMessage(
        {
            tipo: "evaluacion",
            nota,          // üëà puntaje original (0‚Äì35)
            nivel,
            condicion,
            observaciones,
            puntaje_total: suma,
            total_criterios: TOTAL,
            detalles: {
                tipo: "perfil",
                total_criterios: TOTAL,
                puntaje: suma,
                calculado_en: new Date().toISOString()
            }
        },
        "*"
    );

    alert(
        "PUNTAJE OBTENIDO: " + nota +
        "\nNIVEL: " + nivel +
        "\nCONDICI√ìN: " + condicion
    );

    btn.textContent = "Enviado ‚úî";
});
</script>


</body>
</html>
